# Node factory

## About

When developing or testing your application, you might need to mock data comming from a database or an endpoint. Instead of manually generating "random" data, you can use model factories. This package allows you to define a default set of attributes for each of your endpoints or models and easily mock responses.

## Usage

```bash
npm install --save-dev node-factory
// or
yarn add -D node-factory
```

## API

### `factory(generator)`

**args**:

- `generator (Function)`: Generator function which describes your data object. This function receives a `faker` instance as an argument

**return**:

- `Factory object (Object)`: The factory object contains four methods: `create`, `only`, `make` and `seed`

#### Description

You should create a factory object for the data you want to generate. To do that, you need to specify the type of data. To do this, the factory class makes use of the [Faker.js](https://github.com/marak/Faker.js/) package which provides an easy way to generate random data.

#### Example

```js
import factory from '@/test-utils/factory';

const UserFactory = factory(fake => ({
  id: fake.random.uuid(),
  name: fake.name.findName(),
  email: fake.internet.email(),
}));

export default UserFactory;
```

### `Factory.create([overrides])`

**args:**

- `overrides (Object [optional])`: These are value which should be overridden on the generated data (default: {})

**return:**

- `data (Object)`: Data object generated by your generator function

#### Description

This method is used to generate a data object.

#### Example

```js
import UserFactory from '@/path/to/UserFactory';

console.log(UserFactory.create());
/**
 * @Outputs
 * {
 *    id: 'b6f283bf-8b79-44ab-81c1-e49d063dec98',
 *    name: 'Eloisa Jacobson',
 *    email: 'Clifford15@hotmail.com',
 * }
 */

console.log(UserFactory.create({ name: 'JOHN DOE' }));
/**
 * @Outputs
 * {
 *    id: 'e91beb36-0214-4d28-bf5e-22961e50bf5a',
 *    name: 'JOHN DOE',
 *    email: 'Wilfrid.Anderson20@hotmail.com',
 * }
 */
```

### `Factory.only(fields[, overrides])`

**args:**

- `fields (String | Array)`: This argument defines the fields that should be returned.

  - If a `String`, returns an object containing only that key
  - If an `Array`, returns an object containing only the keys contained in the array
- `overrides (Object [optional])`: These are value which should be overridden on the generated data (default: {})

**return:**

- `data (Object)`: Data object generated by your generator function

#### Description

This method is used to generate a data object containing only the keys specified. This could be particularly useful for updating state.

#### Example

```js
import UserFactory from '@/path/to/UserFactory';

console.log(UserFactory.only('email'));
/**
 * @Outputs
 * {
 *    email: 'Ramiro2@gmail.com',
 * }
 */

console.log(UserFactory.only(['email', 'name']));
/**
 * @Outputs
 * {
 *    email: 'Jaida21@hotmail.com',
 *    name: 'Bailee O'Reilly PhD',
 * }
 */

console.log(UserFactory.only(['id', 'email'], { id: '123' }));
/**
 * @Outputs
 * {
 *    id: '123',
 *    name: 'Maci_Mueller4@gmail.com',
 * }
 */
```

### `Factory.make([count, overrides])`

**args:**

- `count (number [optional])`: This argument defines how many objects should be generated (default: 1)
- `overrides (Object [optional])`: These are value which should be overridden on the generated data (default: {})

> If an object is passed in as the first argument, it will be used to override the values and the count will be set to 1.

**return:**

- `data (Array)`: Array containing data objects generated by your generator function

#### Description

This method is used to generate many data objects at once.

#### Example

```js
import UserFactory from '@/path/to/UserFactory';

console.log(UserFactory.make());
/**
 * @Outputs
 * [
 *  {
 *    id: 'bbfa52e6-87b9-4317-b345-eb11f4232269',
 *    name: 'Miss Johnnie White',
 *    email: 'Jessyca_Kirlin57@hotmail.com',
 *  },
 * ]
 */

console.log(UserFactory.make({ id: '123' }));
/**
 * @Outputs
 * [
 *  {
 *    id: '123',
 *    name: 'Emmanuel Bednar',
 *    email: 'Elyse.Hintz@yahoo.com',
 *  },
 * ]
 */

console.log(UserFactory.make(2));
/**
 * @Outputs
 * [
 *  {
 *    id: '77445b7e-25e2-49d4-bee8-a2dd108a1cbc',
 *    name: 'Russel O\'Hara',
 *    email: 'Destin.Mayer20@hotmail.com',
 *  },
 *  {
 *    id: 'a6990f82-9ff8-4fc7-a88a-bd000598cb84',
 *    name: 'Casandra Tillman',
 *    email: 'Vilma20@hotmail.com',
 *  },
 * ]
 */

console.log(UserFactory.make(2, { id: '123' }));
/**
 * @Outputs
 * [
 *  {
 *    id: '123',
 *    name: 'Cassie Rath',
 *    email: 'Jorge_Collier25@hotmail.com'
 *  },
 *  {
 *    id: '123',
 *    name: 'Thomas Gleason',
 *    email: 'Rachelle10@hotmail.com'
 *  },
 * ]
 */
```

### `Factory.seed(value)`

**args:**

- `value (number)`: This argument defines how many objects should be generated (default: 1)

**return:**

- `self (Factory object)`: Returns the factory object for fluent API

#### Description

At times, you might need consistent results or, in other words, a not so random set of data. For this, you can set a `seed` which allows the random data to return the same result more than once. This is particularly useful for snapshot testing.

#### Example

```js
import UserFactory from '@/path/to/UserFactory';

console.log(UserFactory.seed(123).create());
/**
 * @Outputs
 * {
 *    id: 'bb463b8b-b76c-4f6a-9726-65ab5730b69b',
 *    name: 'Idella Dare',
 *    email: 'Justus.Rath@gmail.com',
 * }
 */

console.log(UserFactory.seed(123).create());
/**
 * @Outputs
 * {
 *    id: 'bb463b8b-b76c-4f6a-9726-65ab5730b69b',
 *    name: 'Idella Dare',
 *    email: 'Justus.Rath@gmail.com',
 * }
 */
```

## Author

- [Olavo Amorim Santos](https://github.com/olavoasantos)
